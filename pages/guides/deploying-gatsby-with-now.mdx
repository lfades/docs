import Guide from '~/components/layout/guide'
import { TerminalInput } from '~/components/text/terminal'
import { InlineCode } from '~/components/text/code'
import Caption from '~/components/text/caption'
import Note from '~/components/text/note'
import { GenericLink } from '~/components/text/link'
import Card from '~/components/card'

export const meta = {
  title: 'Create a Gatsby Website and Deploy It with Now',
  description:
    'Learn how to create a simple Gatsby website and deploy it live with ZEIT Now',
  published: '2019-01-31T12:00:00.860Z',
  authors: ['timothy'],
  url: '/guides/deploying-gatsby-with-now',
  editUrl: 'pages/guides/deploying-gatsby-with-now.mdx',
  lastEdited: '2019-07-20T00:10:25.000Z'
}

[Gatsby](https://www.gatsbyjs.org) is a popular front-end framework that helps you create static apps and websites with React.

In this guide, we will show how you can set up your Gatsby project and deploy with Now in a few moments.

## Step 1: Set Up Your Gatsby Project

If you have not already [set up a Gatsby project](https://www.gatsbyjs.org/docs/quick-start) you can do so by first installing Gatsby CLI globally from your terminal:

<TerminalInput>yarn global add gatsby-cli</TerminalInput>
<Caption>Installing <GenericLink href="https://www.gatsbyjs.org/docs/gatsby-cli/">gatsby-cli</GenericLink> globally with <GenericLink href="https://yarnpkg.com">Yarn</GenericLink>.</Caption>

Then you can run the following command to create a Gatsby project locally:

<TerminalInput>gatsby new my-gatsby-project</TerminalInput>
<Caption>Creating a Gatsby project by creating the <InlineCode>my-gatsby-project</InlineCode> directory and generating content within it with gatsby-cli.</Caption>

At this point you you add a `now-dev` script to your `package.json` file. This will allow you to [replicate the Now environment locally](/docs/v2/development/basics/):

```json
{
  ...
  "scripts": {
    ...
    "now-dev": "gatsby develop -p $PORT",
  }
}
```

<Caption>
  Adding a <InlineCode>now dev</InlineCode> script to the{' '}
  <InlineCode>package.json</InlineCode> file.
</Caption>

The [`@now/static-build` Builder](/docs/v2/deployments/official-builders/static-build-now-static-build/#local-development) supports a custom `now-dev` script that allows you to define [custom development behavior](/docs/v2/development/basics/#custom-development-environment) while gaining extra features that mimic the Now platform locally.

To run your project locally, all that's required is a **single command**:

<TerminalInput>now dev</TerminalInput>

## Step 2: Deploying Your Gatsby Website with Now

With a Gatsby application set up, it is ready to deploy live with [Now](/docs/v2).

If you have not yet installed Now, you can do so by installing the [Now Desktop app](/docs/v2/getting-started/installation/#now-desktop) which installs Now CLI automatically, or by [installing Now CLI](/docs/v2/getting-started/installation/#now-cli) directly.

Now allows you to [deploy your project](/docs/v2/deployments/basics) from the terminal with **just a single command**:

<TerminalInput>now</TerminalInput>

<Caption>
  Deploying the application with the <InlineCode>now</InlineCode> command.
</Caption>

If you want to deploy your Gatsby project when you push to a Git repository, you can use either [Now for GitHub](/docs/v2/integrations/now-for-github/) or [Now for GitLab](/docs/v2/integrations/now-for-gitlab/) to have your project automatically deployed on every push, and aliased on push to master.

## Resources

For more information on working with Gatsby, please refer to [their documentation](https://www.gatsbyjs.org/docs/).

To configure Now further, please see these additional topics and guides:

<Card title="Deploying Basics" href="/docs/v2/deployments/basics">
  Deploy any of your applications with ZEIT Now.
</Card>

<Card
  title="Aliasing"
  href="/docs/v2/custom-domains#deploying-with-your-domain"
>
  Learn more about aliasing to your deployments.
</Card>

<Card title="www. Redirect" href="/guides/redirect-from-www">
  Create a redirect from the www. subdomain to your naked domain.
</Card>

<Card title="More Guides" href="/guides">
  See more guides that help you move forward with your projects and deployments.
</Card>

export default ({ children }) => <Guide meta={meta}>{children}</Guide>
